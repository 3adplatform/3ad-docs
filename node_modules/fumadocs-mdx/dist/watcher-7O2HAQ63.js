// src/map/watcher.ts
import { watch } from "chokidar";
function watcher(configPath, config, ignored) {
  const deps = [configPath];
  function add(dir) {
    if (Array.isArray(dir)) deps.push(...dir);
    else deps.push(dir);
  }
  for (const collection of config.collections.values()) {
    if (collection.type === "docs") {
      add(collection.docs.dir);
      add(collection.meta.dir);
    } else {
      add(collection.dir);
    }
  }
  return watch(deps, {
    ignoreInitial: true,
    ignored,
    persistent: true
  });
}
export {
  watcher
};
